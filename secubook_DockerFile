FROM linuxserver/code-server

# 필요한 것들 다운로드
RUN apt-get update
RUN apt-get install vim -y
RUN apt-get install openjdk-8-jdk -y

# 문제 제공 환경 구축
RUN cd opt
RUN git clone https://github.com/SupremeTim/secubook_problem.git

# 문제 workspace로 복사
RUN cd secubook_problem
RUN cp -r problems problems_cp
RUN mv problems_cp /config/workspace
RUN cd /config/workspace
RUN mv problems_cp problems

# 환경 변수 설정
RUN cd /opt/secubook_problem/EnvironmentVariable
RUN cp profile profile_cp
RUN mv profile_cp /etc
RUN cd /etc
RUN mv profile_cp profile
RUN source profile

# CodeAnalyzer 빌드
RUN cd /opt/secubook_problem/CodeAnalyzer/src
RUN javac com/company/Main.java
